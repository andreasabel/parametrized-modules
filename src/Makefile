# Makefile generated by BNFC.

# List of goals not corresponding to file names.

.PHONY : all clean distclean test

# Default goal.

test : ParMod/Test test/Example1.agda Makefile
	ParMod/Test test/Example1.agda

all : ParMod/Test Main test

# Rules for building the parser.

ParMod/ErrM.hs ParMod/Lex.x ParMod/Print.hs ParMod/Par.y ParMod/Test.hs ParMod/AST.agda ParMod/Parser.agda ParMod/IOLib.agda ParMod/Main.agda : ParMod.cf
	bnfc --haskell -d --agda ParMod.cf

%.hs : %.y
	happy --ghc --coerce --array --info $<

%.hs : %.x
	alex --ghc $<

ParMod/Test : ParMod/Test.hs ParMod/ErrM.hs ParMod/Lex.hs ParMod/Par.hs ParMod/Print.hs
	ghc --make $< -o $@

Main : ParMod/Main.agda ParMod/AST.agda ParMod/Parser.agda ParMod/IOLib.agda ParMod/ErrM.hs ParMod/Lex.hs ParMod/Par.hs ParMod/Print.hs
	agda --no-libraries --ghc --ghc-flag=-Wwarn $<

# Rules for cleaning generated files.

clean :
	-rm -f ParMod/*.hi ParMod/*.o ParMod/*.log ParMod/*.aux ParMod/*.dvi ParMod/*.agdai
	-rm -rf MAlonzo

distclean : clean
	-rm -f ParMod/Abs.hs ParMod/Abs.hs.bak ParMod/ComposOp.hs ParMod/ComposOp.hs.bak ParMod/Doc.txt ParMod/Doc.txt.bak ParMod/ErrM.hs ParMod/ErrM.hs.bak ParMod/Layout.hs ParMod/Layout.hs.bak ParMod/Lex.x ParMod/Lex.x.bak ParMod/Par.y ParMod/Par.y.bak ParMod/Print.hs ParMod/Print.hs.bak ParMod/SharedString.hs ParMod/SharedString.hs.bak ParMod/Skel.hs ParMod/Skel.hs.bak ParMod/Test.hs ParMod/Test.hs.bak ParMod/XML.hs ParMod/XML.hs.bak ParMod/AST.agda ParMod/AST.agda.bak ParMod/Parser.agda ParMod/Parser.agda.bak ParMod/IOLib.agda ParMod/IOLib.agda.bak ParMod/Main.agda ParMod/Main.agda.bak ParMod/ParMod.dtd ParMod/ParMod.dtd.bak ParMod/Test ParMod/Lex.hs ParMod/Par.hs ParMod/Par.info ParMod/ParData.hs Main Makefile
	-rmdir -p ParMod/

# EOF
